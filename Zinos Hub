-- [[ Zoins Hub - الإصدار المحدث ]] --

local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- 1. قائمة المابات
local MyMaps = {
    {
        English = "Universal Script [كل مابات]", 
        Arabic = "سكربت عام [كل مابات]", 
        Keywords = "universal speed fly noclip jump hack كل مابات", 
        Scripts = {
            {Name = "Script 1", Link = "https://rawscripts.net/raw/Universal-Script-VR7-45290"},
            {Name = "Script 2", Link = "https://rawscripts.net/raw/Universal-Script-Simple-GUI-V1-39993"}
        }
    },
    {English = "99 Nights", Arabic = "99 ليلة", Keywords = "99 ليله 99 ليلة ماب صرقه ماب صرقة سرقه سرقة", Scripts = {{Link = "https://raw.githubusercontent.com/VapeVoidware/VW-Add/main/nightsintheforest.lua"}}},
    {English = "MM2", Arabic = "جريمة قتل غامضة", Keywords = "جريمه قتل غامضه جريمة قتل غامضة مردر مستري مم2 mm2", Scripts = {{Link = "https://raw.githubusercontent.com/Joystickplays/psychic-octo-invention/main/source/yarhm/1.19/yarhm.lua"}}},
    {
        English = "BROOKHAVEN", 
        Arabic = "بروخافن", 
        Keywords = "بروخافن ماب البيوت بيوت بروك هافن ماب بيوت", -- تم إضافة ماب بيوت هنا
        Scripts = {
            {Name = "Script 1", Link = "https://rawscripts.net/raw/Universal-Script-VR7-45290"},
            {Name = "Script 2", Link = "https://rawscripts.net/raw/Brookhaven-RP-Rael-Hub-58126"}
        }
    },
    {English = "Steal a Brainrot", Arabic = "ماب سرقة", Keywords = "ماب سرقة ماب سرقه ماب صرقة ماب صرقه", Scripts = {{Link = "https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua"}}},
    {English = "Blox Fruits", Arabic = "بلوكس فروتس", Keywords = "ون بيس فواكه بلوكس فروت ونبيس", Scripts = {{Link = "https://raw.githubusercontent.com/REDZHUB/Blox_Fruits/main/main.lua"}}},
    {English = "فعاليات الرسم للعرب", Arabic = "فعاليات الرسم للعرب", Keywords = "رسم عرب فعاليات ماب الرسم رسم", Scripts = {{Link = "https://rawscripts.net/raw/Universal-Script-HD-copying-LOSKY-59113"}}}
}

-- الواجهة الأساسية
local sgui = Instance.new("ScreenGui", game:GetService("CoreGui"))

-- [[ وظيفة رسالة التنبيه عند التشغيل ]] --
local function ShowNotification()
    local NotifFrame = Instance.new("Frame", sgui)
    NotifFrame.Size = UDim2.new(0, 250, 0, 60)
    NotifFrame.Position = UDim2.new(1, 50, 0.1, 0)
    NotifFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    NotifFrame.BorderSizePixel = 0
    Instance.new("UICorner", NotifFrame)
    
    local stroke = Instance.new("UIStroke", NotifFrame)
    stroke.Color = Color3.fromRGB(184, 134, 11)
    stroke.Thickness = 2

    local NotifText = Instance.new("TextLabel", NotifFrame)
    NotifText.Size = UDim2.new(1, -20, 1, 0)
    NotifText.Position = UDim2.new(0, 10, 0, 0)
    NotifText.BackgroundTransparency = 1
    NotifText.Text = "اذا مااشتغل سكربت شغل VPN"
    NotifText.TextColor3 = Color3.new(1, 1, 1)
    NotifText.Font = Enum.Font.GothamBold
    NotifText.TextSize = 14
    NotifText.TextWrapped = true

    NotifFrame:TweenPosition(UDim2.new(1, -260, 0.1, 0), "Out", "Quad", 0.5, true)
    
    task.delay(5, function()
        NotifFrame:TweenPosition(UDim2.new(1, 50, 0.1, 0), "In", "Quad", 0.5, true)
        task.wait(0.5)
        NotifFrame:Destroy()
    end)
end

ShowNotification()

local MainFrame = Instance.new("Frame", sgui)
MainFrame.Size = UDim2.new(0, 350, 0, 500)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true 
Instance.new("UICorner", MainFrame)

local SubFrame = Instance.new("Frame", MainFrame)
SubFrame.Size = UDim2.new(1, 0, 1, 0)
SubFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
SubFrame.BorderSizePixel = 0
SubFrame.Visible = false
SubFrame.ZIndex = 10
Instance.new("UICorner", SubFrame)

local SubTitle = Instance.new("TextLabel", SubFrame)
SubTitle.Size = UDim2.new(1, 0, 0, 60)
SubTitle.BackgroundTransparency = 1
SubTitle.Font = Enum.Font.GothamBlack
SubTitle.TextSize = 22
SubTitle.TextColor3 = Color3.new(1, 1, 1)
SubTitle.ZIndex = 11

local SubTitleShine = Instance.new("UIGradient", SubTitle)
SubTitleShine.Name = "Shine"
SubTitleShine.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.new(1, 1, 1)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(150, 150, 150)),
    ColorSequenceKeypoint.new(1, Color3.new(1, 1, 1))
})

local SubScroll = Instance.new("ScrollingFrame", SubFrame)
SubScroll.Size = UDim2.new(1, -20, 1, -100)
SubScroll.Position = UDim2.new(0, 10, 0, 70)
SubScroll.BackgroundTransparency = 1
SubScroll.ScrollBarThickness = 3
SubScroll.ZIndex = 11
SubScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
SubScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
local subLayout = Instance.new("UIListLayout", SubScroll)
subLayout.Padding = UDim.new(0, 10)
subLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local BackArrow = Instance.new("TextButton", SubFrame)
BackArrow.Size = UDim2.new(0, 40, 0, 40)
BackArrow.Position = UDim2.new(0, 5, 0, 5)
BackArrow.Text = "←"
BackArrow.TextColor3 = Color3.new(1, 1, 1)
BackArrow.TextSize = 30
BackArrow.BackgroundTransparency = 1
BackArrow.Font = Enum.Font.GothamBold
BackArrow.ZIndex = 12
BackArrow.MouseButton1Click:Connect(function() SubFrame.Visible = false end)

local TitleLabel = Instance.new("TextLabel", MainFrame)
TitleLabel.Size = UDim2.new(1, 0, 0, 80)
TitleLabel.Text = "Zoins Hub"
TitleLabel.TextColor3 = Color3.new(1, 1, 1)
TitleLabel.Font = Enum.Font.GothamBlack
TitleLabel.TextSize = 38
TitleLabel.BackgroundTransparency = 1

local titleGrad = Instance.new("UIGradient", TitleLabel)
titleGrad.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(184, 134, 11)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 255, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(184, 134, 11))
})

local OpenBtn = Instance.new("TextButton", sgui)
OpenBtn.Size = UDim2.new(0, 80, 0, 80)
OpenBtn.Position = UDim2.new(0.9, -75, 0.5, -40)
OpenBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
OpenBtn.Text = "Zoins"
OpenBtn.Font = Enum.Font.GothamBlack
OpenBtn.TextSize = 18
OpenBtn.TextColor3 = Color3.new(1, 1, 1)
OpenBtn.Visible = false
Instance.new("UICorner", OpenBtn).CornerRadius = UDim.new(1, 0)

local btnStroke = Instance.new("UIStroke", OpenBtn)
btnStroke.Thickness = 3
btnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
local strokeGrad = Instance.new("UIGradient", btnStroke)
strokeGrad.Color = titleGrad.Color
local btnTextGrad = Instance.new("UIGradient", OpenBtn)
btnTextGrad.Color = titleGrad.Color

task.spawn(function()
    while true do
        titleGrad.Offset = Vector2.new(-1, 0)
        btnTextGrad.Offset = Vector2.new(-1, 0)
        TweenService:Create(titleGrad, TweenInfo.new(2, Enum.EasingStyle.Linear), {Offset = Vector2.new(1, 0)}):Play()
        TweenService:Create(btnTextGrad, TweenInfo.new(2, Enum.EasingStyle.Linear), {Offset = Vector2.new(1, 0)}):Play()
        strokeGrad.Rotation = 0
        TweenService:Create(strokeGrad, TweenInfo.new(2, Enum.EasingStyle.Linear), {Rotation = 360}):Play()
        
        SubTitleShine.Offset = Vector2.new(-1, 0)
        TweenService:Create(SubTitleShine, TweenInfo.new(1.5, Enum.EasingStyle.Linear), {Offset = Vector2.new(1, 0)}):Play()

        for _, item in pairs(SubScroll:GetChildren()) do
            if item:IsA("Frame") and item:FindFirstChild("ShineLabel") then
                local sGrad = item.ShineLabel:FindFirstChildOfClass("UIGradient")
                if sGrad then
                    sGrad.Offset = Vector2.new(-1, 0)
                    TweenService:Create(sGrad, TweenInfo.new(1.5, Enum.EasingStyle.Linear), {Offset = Vector2.new(1, 0)}):Play()
                end
            end
        end
        task.wait(2)
    end
end)

local SearchBar = Instance.new("TextBox", MainFrame)
SearchBar.Size = UDim2.new(1, -40, 0, 40)
SearchBar.Position = UDim2.new(0, 20, 0, 90)
SearchBar.Text = "" 
SearchBar.PlaceholderText = "English / عربي" 
SearchBar.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
SearchBar.TextColor3 = Color3.new(1, 1, 1)
SearchBar.Font = Enum.Font.GothamBold
SearchBar.TextSize = 16
Instance.new("UICorner", SearchBar)

local Scroll = Instance.new("ScrollingFrame", MainFrame)
Scroll.Size = UDim2.new(1, -20, 1, -160)
Scroll.Position = UDim2.new(0, 10, 0, 145)
Scroll.BackgroundTransparency = 1
Scroll.ScrollBarThickness = 2
Scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
Scroll.CanvasSize = UDim2.new(0, 0, 0, 50) 
local layout = Instance.new("UIListLayout", Scroll)
layout.Padding = UDim.new(0, 10)

local function PlayButtonEffect(button, gradient)
    gradient.Enabled = false
    button.BackgroundColor3 = Color3.fromRGB(0, 255, 127)
    button.Text = "✅"
    task.delay(1, function()
        button.Text = "Start"
        button.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        gradient.Enabled = true
    end)
end

local function AddMap(data, order)
    local f = Instance.new("Frame", Scroll)
    f.Size = UDim2.new(1, -10, 0, 65)
    f.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Instance.new("UICorner", f)
    
    local tags = Instance.new("StringValue", f); tags.Name = "Tags"
    tags.Value = (data.English .. " " .. data.Arabic .. " " .. (data.Keywords or "")):lower()
    
    local t = Instance.new("TextLabel", f)
    t.Size = UDim2.new(1, -100, 1, 0); t.Position = UDim2.new(0, 15, 0, 0)
    t.Text = data.English; t.TextColor3 = Color3.new(1, 1, 1); t.BackgroundTransparency = 1; t.Font = Enum.Font.GothamBold; t.TextSize = 16

    local btn = Instance.new("TextButton", f)
    btn.Size = UDim2.new(0, 80, 0, 35); btn.Position = UDim2.new(1, -90, 0.5, -17)
    btn.Text = "Start"; btn.Font = Enum.Font.GothamBold; Instance.new("UICorner", btn)
    local mainBtnGrad = Instance.new("UIGradient", btn); mainBtnGrad.Color = titleGrad.Color

    btn.MouseButton1Click:Connect(function()
        for _, child in pairs(SubScroll:GetChildren()) do if child:IsA("Frame") then child:Destroy() end end
        SubTitle.Text = data.English
        
        for _, scr in ipairs(data.Scripts) do
            local sf = Instance.new("Frame", SubScroll)
            sf.Size = UDim2.new(1, -10, 0, 65); sf.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
            sf.ZIndex = 11; Instance.new("UICorner", sf)
            
            local st = Instance.new("TextLabel", sf)
            st.Name = "ShineLabel"; st.ZIndex = 12
            st.Size = UDim2.new(1, -100, 1, 0); st.Position = UDim2.new(0, 15, 0, 0)
            st.Text = data.English; st.TextColor3 = Color3.new(1, 1, 1); st.BackgroundTransparency = 1; st.Font = Enum.Font.GothamBold; st.TextSize = 16
            
            local sLabelGrad = Instance.new("UIGradient", st)
            sLabelGrad.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 1, 1)), ColorSequenceKeypoint.new(0.5, Color3.fromRGB(150, 150, 150)), ColorSequenceKeypoint.new(1, Color3.new(1, 1, 1))})
            
            local sbtn = Instance.new("TextButton", sf)
            sbtn.Size = UDim2.new(0, 80, 0, 35); sbtn.Position = UDim2.new(1, -90, 0.5, -17)
            sbtn.Text = "Start"; sbtn.Font = Enum.Font.GothamBold; sbtn.ZIndex = 12; sbtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255); Instance.new("UICorner", sbtn)
            
            local sGrad = Instance.new("UIGradient", sbtn); sGrad.Color = titleGrad.Color
            
            sbtn.MouseButton1Click:Connect(function()
                task.spawn(function()
                    pcall(function() 
                        loadstring(game:HttpGet(scr.Link, true))() 
                    end)
                end)
                PlayButtonEffect(sbtn, sGrad)
            end)
        end
        SubFrame.Visible = true
    end)
end

for i, data in ipairs(MyMaps) do AddMap(data, i) end

local ComingSoon = Instance.new("TextLabel", Scroll)
ComingSoon.Size = UDim2.new(1, 0, 0, 40)
ComingSoon.Text = "قريباً Coming Soon"
ComingSoon.TextColor3 = Color3.fromRGB(150, 150, 150)
ComingSoon.Font = Enum.Font.GothamBold
ComingSoon.TextSize = 14
ComingSoon.BackgroundTransparency = 1

local function MakeDraggable(gui)
    local dragging, dragInput, dragStart, startPos
    local totalMove = 0
    gui.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = true; dragStart = input.Position; startPos = gui.Position; totalMove = 0 end
    end)
    gui.InputChanged:Connect(function(input) if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart; totalMove = totalMove + delta.Magnitude
        gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end end)
    UserInputService.InputEnded:Connect(function(input) dragging = false end)
    return function() return totalMove end
end

local getBtnMoveDist = MakeDraggable(OpenBtn)
MakeDraggable(MainFrame)
OpenBtn.MouseButton1Click:Connect(function() if getBtnMoveDist() < 10 then MainFrame.Visible = true; OpenBtn.Visible = false end end)
local CloseBtn = Instance.new("TextButton", MainFrame)
CloseBtn.Size = UDim2.new(0, 30, 0, 30); CloseBtn.Position = UDim2.new(1, -35, 0, 10); CloseBtn.Text = "X"; CloseBtn.TextColor3 = Color3.new(1, 0, 0); CloseBtn.BackgroundTransparency = 1; CloseBtn.ZIndex = 20
CloseBtn.MouseButton1Click:Connect(function() MainFrame.Visible = false; OpenBtn.Visible = true; SubFrame.Visible = false end)

local function smartNormalize(txt)
    txt = txt:lower():gsub("[أإآ]", "ا"):gsub("ة", "ه"):gsub("ى", "ي"):gsub("^ال", ""):gsub("%sال", " ")
    return txt:match("^%s*(.-)%s*$")
end

SearchBar:GetPropertyChangedSignal("Text"):Connect(function()
    local input = smartNormalize(SearchBar.Text)
    ComingSoon.Visible = (input == "")
    for _, item in pairs(Scroll:GetChildren()) do if item:IsA("Frame") then
        local tags = item:FindFirstChild("Tags")
        if tags then
            local tagVal = smartNormalize(tags.Value)
            -- تم تحسين البحث هنا ليتعرف على الكلمات حتى لو كانت جزءاً من النص
            item.Visible = (input == "" or tagVal:find(input, 1, true) ~= nil)
        end
    end end
end)
